{
    "openapi": "3.0.0",
    "info": {
        "title": "Sapper API",
        "description": "This is a documentation for the API for the game Sapper with microtransactions",
        "version": "1.0.0"
    },
    "servers": [{
        "url": "https://sapper-api.onrender.com"
    }],
    "paths": {
        "/health": {
            "get": {
                "summary": "Health Check Endpoint",
                "description": "Endpoint to check the health of the API.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "response": "ok",
                                    "timing": "0.123s | 0.456s"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "response": "database error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "summary": "User Login Endpoint",
                "description": "Endpoint for user login.",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "required": ["email", "password"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "session_id": "xyz123",
                                    "username": "example_user",
                                    "xp": 100,
                                    "battlepass_xp": 50,
                                    "coins": 500,
                                    "gems": 10,
                                    "type": "success"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "unknown error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/register": {
            "post": {
                "summary": "User Registration Endpoint",
                "description": "Endpoint for user registration.",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencoded": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "required": ["email", "username", "password"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "session_id": "xyz123",
                                    "username": "example_user"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "unknown error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/logout": {
            "post": {
                "summary": "User Logout Endpoint",
                "description": "Endpoint for user logout.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "unknown error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_user_id": {
            "get": {
                "summary": "Get User ID Endpoint",
                "description": "Endpoint to retrieve user ID based on session ID.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "id": "user123"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_balance": {
            "post": {
                "summary": "Get User Balance Endpoint",
                "description": "Endpoint to retrieve user balance (coins and gems) based on session ID.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "coins": 500,
                                    "gems": 10
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing session id"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_all_skins": {
            "get": {
                "summary": "Get All Skins Endpoint",
                "description": "Endpoint to retrieve information about all available skins.",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "1": {
                                        "name": "Skin1",
                                        "price_coins": 100,
                                        "price_gems": 5
                                    },
                                    "2": {
                                        "name": "Skin2",
                                        "price_coins": 150,
                                        "price_gems": 8
                                    },
                                    "3": {
                                        "name": "Skin3",
                                        "price_coins": 200,
                                        "price_gems": 10
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_user_skins": {
            "post": {
                "summary": "Get User Skins Endpoint",
                "description": "Endpoint to retrieve the skins owned by a user based on session ID.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "ids": [1, 3, 5]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/buy_skin": {
            "post": {
                "summary": "Buy Skin Endpoint",
                "description": "Endpoint to purchase a skin using either coins or gems.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "skin_id": {
                                        "type": "integer"
                                    },
                                    "currency": {
                                        "type": "string",
                                        "enum": ["coins", "gems"]
                                    }
                                },
                                "required": ["session_id", "skin_id", "currency"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "currency": "coins",
                                    "new_balance": 300
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing parameters"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/buy_gems": {
            "post": {
                "summary": "Buy Gems Endpoint",
                "description": "Endpoint to purchase gems.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "gemsQuantity": {
                                        "type": "integer"
                                    }
                                },
                                "required": ["session_id", "gemsQuantity"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "new_balance": 150
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing parameters"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/buy_battlepass": {
            "post": {
                "summary": "Buy Battle Pass Endpoint",
                "description": "Endpoint to purchase the Battle Pass.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "new_balance": 120
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/battlepass_status": {
            "post": {
                "summary": "Battle Pass Status Endpoint",
                "description": "Endpoint to check the Battle Pass ownership status.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "owned": "true"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_booster_count": {
            "post": {
                "summary": "Get Booster Count Endpoint",
                "description": "Endpoint to retrieve the booster count for a logged-in user.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "booster_count": 3
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/buy_booster": {
            "post": {
                "summary": "Buy Booster Endpoint",
                "description": "Endpoint to purchase a booster.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "currency": {
                                        "type": "string",
                                        "enum": ["coins", "gems"]
                                    }
                                },
                                "required": ["session_id", "currency"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "new_balance": 120,
                                    "currency": "gems",
                                    "booster_count": 2
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing parameters"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/set_avatar": {
            "post": {
                "summary": "Set Avatar Endpoint",
                "description": "Endpoint to set the user's avatar.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "avatar_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id", "avatar_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing parameters"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_avatar": {
            "post": {
                "summary": "Get Avatar Endpoint",
                "description": "Endpoint to retrieve the user's avatar.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "avatar_id": "avatar123"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/get_user_avatars": {
            "post": {
                "summary": "Get User Avatars Endpoint",
                "description": "Endpoint to retrieve the avatars owned by the user.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success",
                                    "owned_avatars": ["avatar123", "avatar456"]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/click_tile": {
            "post": {
                "summary": "Click Tile Endpoint",
                "description": "Endpoint to handle tile clicks in a Minesweeper game.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "tile_id": {
                                        "type": "string"
                                    }
                                },
                                "required": ["session_id", "tile_id"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "playing",
                                    "board": [
                                        {
                                            "id": "tile1",
                                            "value": 0,
                                            "hidden": false
                                        },
                                        {
                                            "id": "tile2",
                                            "value": 1,
                                            "hidden": false
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "not logged in"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "tile not found",
                                    "board": [{
                                            "id": "tile1",
                                            "value": 0,
                                            "hidden": false
                                        },
                                        {
                                            "id": "tile2",
                                            "value": 1,
                                            "hidden": false
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/create_game": {
            "post": {
                "summary": "Create Game Endpoint",
                "description": "Endpoint to create a new Minesweeper game.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "session_id": {
                                        "type": "string"
                                    },
                                    "size_x": {
                                        "type": "integer"
                                    },
                                    "size_y": {
                                        "type": "integer"
                                    },
                                    "difficulty": {
                                        "type": "string"
                                    },
                                    "booster_used": {
                                        "type": "integer"
                                    }
                                },
                                "required": ["session_id", "size_x", "size_y", "difficulty", "booster_used"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "success"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "missing parameters"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "example": {
                                    "type": "fail",
                                    "reason": "wrong session id"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "example": {
                                    "error": "Internal Server Error"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}